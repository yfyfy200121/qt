# 数字图像处理软件 V1.0

## 项目简介

这是一个基于 Qt 和 OpenCV 开发的数字图像处理软件，提供了丰富的图像和视频处理功能。软件采用现代化的深色主题界面，支持图像查看、批量处理以及实时视频处理等功能。

**作者**: 杨帆  
**学号**: 249350532  
**版本**: 1.0

## 主要功能

### 图像处理功能

1. **图像查看**
   - 支持多种图像格式（JPEG、PNG 等）
   - 缩略图预览，方便快速浏览
   - 支持图像缩放（1%-1000%）
   - 滚动查看大图

2. **基础图像处理**
   - **灰度化**: 将彩色图像转换为灰度图像
   - **二值化**: 可调节阈值的二值化处理（0-255）
   - **均值滤波**: 3×3 均值滤波，减少图像噪声
   - **伽马变换**: 可调节伽马值（0.1-5.0），调整图像亮度
   - **边缘检测**: 基于 Sobel 算子的边缘检测

3. **实时预览**
   - 二值化和伽马变换支持滑块实时调节
   - 参数变化时立即显示处理效果
   - 一键恢复原始图像

### 视频处理功能

1. **视频播放**
   - 支持常见视频格式
   - 实时视频帧处理

2. **视频实时处理**
   - 灰度化处理
   - 二值化处理
   - 边缘检测
   - 均值滤波
   - 马赛克效果
   - 重置功能

3. **YOLO 目标追踪**
   - 基于 YOLOv5 的实时目标检测和追踪
   - 使用 ONNX 模型进行推理
   - 支持多目标识别

## 技术栈

- **开发语言**: C++17
- **GUI 框架**: Qt 6 (Core, Gui, Widgets, Multimedia, MultimediaWidgets)
- **图像处理**: OpenCV 4.11.0
- **深度学习**: YOLOv5 (ONNX)

## 系统要求

### 软件依赖

- Qt 6.x 或更高版本
  - Qt Core
  - Qt Gui
  - Qt Widgets
  - Qt Multimedia
  - Qt MultimediaWidgets
  - Qt Concurrent
  - Qt OpenGL
  
- OpenCV 4.11.0 或兼容版本
  - opencv_core
  - opencv_imgproc
  - opencv_highgui
  - opencv_dnn

### 编译器要求

- 支持 C++17 标准的编译器
- 推荐使用 MinGW 64 位（Windows）

## 安装与编译

### 1. 安装依赖

#### Windows 环境

1. 安装 Qt 6
   - 从 [Qt 官网](https://www.qt.io/download) 下载并安装 Qt 6
   - 安装时选择 MinGW 编译器

2. 安装 OpenCV
   - 下载 OpenCV 4.11.0
   - 将 OpenCV 解压到 `C:/opencv/`
   - 确保路径结构为 `C:/opencv/build/include` 和 `C:/opencv/build/x64/mingw64/lib`

3. 下载 YOLOv5 模型
   - 将 `yolov5s.onnx` 模型文件放置在项目根目录

### 2. 编译项目

使用 Qt Creator 打开项目：

```bash
# 打开项目文件
yangfan249350532.pro
```

或使用命令行编译：

```bash
# 生成 Makefile
qmake yangfan249350532.pro

# 编译
mingw32-make
```

### 3. 运行程序

编译完成后，在构建目录中运行生成的可执行文件。

**注意**: 确保 OpenCV 的 DLL 文件在系统 PATH 中，或将所需的 DLL 文件复制到可执行文件同一目录。

## 使用说明

### 图像处理

1. **打开图像**
   - 点击工具栏的"打开文件"按钮（Ctrl+O）
   - 选择一个或多个图像文件
   - 图像将显示在主窗口，缩略图显示在底部

2. **应用图像处理**
   - 在右侧工具栏选择处理功能
   - 点击相应按钮即可应用效果
   - 使用滑块可以实时调节二值化阈值和伽马值
   - 点击"重置图片"恢复原始图像

3. **缩放图像**
   - 使用工具栏的缩放比例选择器（1%-1000%）
   - 调节比例实时缩放显示的图像

### 视频处理

1. **播放视频**
   - 点击工具栏的"播放视频"按钮（Ctrl+V）
   - 选择视频文件
   - 视频将在主窗口播放

2. **应用实时处理**
   - 在视频播放时选择处理模式
   - 效果将实时应用于视频帧
   - 支持灰度化、二值化、边缘检测、均值滤波等

3. **YOLO 目标追踪**
   - 点击工具栏的"YOLO 目标追踪"按钮（Ctrl+Y）
   - 系统将使用 YOLOv5 模型进行实时目标检测

## 项目结构

```
qt/
├── main.cpp                    # 程序入口
├── mainwindow.h               # 主窗口头文件
├── mainwindow.cpp             # 主窗口实现
├── mainwindow.ui              # UI 设计文件
├── yangfan249350532.pro       # Qt 项目文件
├── resoures.qrc               # 资源文件
├── yolov5s.onnx              # YOLOv5 模型文件
├── images/                    # 图标和资源图片
│   ├── hq.ico                # 程序图标
│   ├── open.png              # 打开文件图标
│   ├── bf.jpg                # 播放图标
│   └── ...
└── README.md                  # 本文件
```

## 快捷键

- `Ctrl+O`: 打开图像文件
- `Ctrl+V`: 播放视频
- `Ctrl+Y`: YOLO 目标追踪

## 界面特点

- **现代化深色主题**: 采用 Fusion 风格和深色调色板
- **响应式布局**: 支持窗口大小调整
- **工具栏停靠**: 图像处理工具栏可停靠在左右两侧
- **状态栏提示**: 实时显示操作状态和信息
- **缩略图预览**: 底部显示已打开图像的缩略图

## 注意事项

1. **路径配置**: 如果 OpenCV 安装在不同位置，需要修改 `.pro` 文件中的 `INCLUDEPATH` 和 `LIBS` 配置
2. **YOLO 模型**: 确保 `yolov5s.onnx` 文件位于可执行文件同一目录或项目根目录
3. **性能**: 视频处理和 YOLO 追踪功能对计算资源要求较高，建议在性能较好的设备上运行
4. **图像格式**: 建议使用常见的图像格式（JPEG、PNG、BMP 等）以获得最佳兼容性

## 开发环境

本项目在以下环境下开发和测试：

- 操作系统: Windows
- IDE: Qt Creator
- Qt 版本: 6.x
- OpenCV 版本: 4.11.0
- 编译器: MinGW 64

## 许可证

本项目仅用于学习和研究目的。

## 联系方式

如有问题或建议，请联系：

- 作者: 杨帆
- 学号: 249350532

---

**注**: 这是一个数字图像处理课程项目，展示了 Qt 和 OpenCV 在图像处理应用中的集成使用。
